<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProColor Studio - Professional Color Palette Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .color-swatch {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .color-swatch:hover {
            transform: scale(1.05);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .color-info {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 12px;
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }
        
        .color-swatch:hover .color-info {
            transform: translateY(0);
        }
        
        .lock-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 6px;
            padding: 6px;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .color-swatch:hover .lock-btn {
            opacity: 1;
        }
        
        .lock-btn.locked {
            background: #fbbf24;
            opacity: 1;
        }
        
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #10b981;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1000;
        }
        
        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #374151;
            border: 1px solid rgba(0, 0, 0, 0.1);
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .settings-panel {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        
        .settings-panel.open {
            max-height: 500px;
        }
        
        .preview-card {
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="min-h-screen gradient-bg">
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- Header -->
        <header class="text-center mb-8">
            <div class="glass rounded-2xl p-8 mb-6">
                <h1 class="text-4xl md:text-6xl font-black text-white mb-4">
                    üé® ProColor Studio
                </h1>
                <p class="text-xl text-white/90 mb-6">
                    Professional color palette generator with AI-powered algorithms
                </p>
                <div class="flex flex-wrap justify-center gap-4">
                    <button id="generateBtn" class="btn-primary">
                        ‚ö° Generate Magic
                    </button>
                    <button id="settingsBtn" class="btn-secondary text-white">
                        ‚öôÔ∏è Settings
                    </button>
                </div>
            </div>
        </header>

        <!-- Settings Panel -->
        <div id="settingsPanel" class="settings-panel mb-6">
            <div class="glass rounded-xl p-6">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div>
                        <label class="block text-white font-semibold mb-2">Color Format</label>
                        <select id="colorFormat" class="w-full p-3 rounded-lg bg-white/10 text-white border border-white/20">
                            <option value="hex">HEX</option>
                            <option value="rgb">RGB</option>
                            <option value="hsl">HSL</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-white font-semibold mb-2">Palette Type</label>
                        <select id="paletteType" class="w-full p-3 rounded-lg bg-white/10 text-white border border-white/20">
                            <option value="complementary">Complementary</option>
                            <option value="analogous">Analogous</option>
                            <option value="triadic">Triadic</option>
                            <option value="monochromatic">Monochromatic</option>
                            <option value="tetradic">Tetradic</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-white font-semibold mb-2">Base Color</label>
                        <div class="flex gap-2">
                            <input type="color" id="baseColor" value="#667eea" class="w-16 h-12 rounded-lg cursor-pointer">
                            <input type="text" id="baseColorText" value="#667eea" class="flex-1 p-3 rounded-lg bg-white/10 text-white border border-white/20 font-mono">
                        </div>
                    </div>
                </div>
                <div class="mt-4 flex gap-2">
                    <button onclick="exportPalette('css')" class="btn-secondary text-white">Export CSS</button>
                    <button onclick="exportPalette('json')" class="btn-secondary text-white">Export JSON</button>
                    <button id="saveBtn" class="btn-secondary text-white">üíæ Save Palette</button>
                </div>
            </div>
        </div>

        <!-- Color Palette Display -->
        <div class="glass rounded-2xl p-6 mb-8">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Your Color Palette</h2>
            <div id="paletteContainer" class="grid grid-cols-2 md:grid-cols-5 gap-4 mb-6">
                <!-- Color swatches will be generated here -->
            </div>
        </div>

        <!-- Preview and Analysis -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Live Preview -->
            <div class="glass rounded-2xl p-6">
                <h3 class="text-xl font-bold text-white mb-4">üåê Live Preview</h3>
                <div id="previewContainer" class="preview-card">
                    <!-- Preview content will be generated here -->
                </div>
            </div>

            <!-- Color Analysis -->
            <div class="glass rounded-2xl p-6">
                <h3 class="text-xl font-bold text-white mb-4">üìä Color Analysis</h3>
                <div id="analysisContainer" class="space-y-3">
                    <!-- Analysis content will be generated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast">
        <span id="toastMessage">Color copied to clipboard!</span>
    </div>

    <script>
        // Global state
        let currentPalette = ['#667eea', '#764ba2', '#f093fb', '#f5576c', '#4facfe'];
        let lockedColors = new Set();
        let savedPalettes = [];
        let colorFormat = 'hex';
        let paletteType = 'complementary';
        let baseColor = '#667eea';

        // Color utility functions
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : null;
        }

        function hexToHsl(hex) {
            const rgb = hexToRgb(hex);
            if (!rgb) return null;
            
            const r = rgb.r / 255;
            const g = rgb.g / 255;
            const b = rgb.b / 255;

            const max = Math.max(r, g, b);
            const min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;

            if (max === min) {
                h = s = 0;
            } else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                switch (max) {
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }
                h /= 6;
            }

            return {
                h: Math.round(h * 360),
                s: Math.round(s * 100),
                l: Math.round(l * 100)
            };
        }

        function hslToHex(h, s, l) {
            l /= 100;
            const a = s * Math.min(l, 1 - l) / 100;
            const f = n => {
                const k = (n + h / 30) % 12;
                const color = l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);
                return Math.round(255 * color).toString(16).padStart(2, '0');
            };
            return `#${f(0)}${f(8)}${f(4)}`;
        }

        function getLuminance(hex) {
            const rgb = hexToRgb(hex);
            if (!rgb) return 0;
            
            const r = rgb.r / 255;
            const g = rgb.g / 255;
            const b = rgb.b / 255;

            const rsRGB = r <= 0.03928 ? r / 12.92 : Math.pow((r + 0.055) / 1.055, 2.4);
            const gsRGB = g <= 0.03928 ? g / 12.92 : Math.pow((g + 0.055) / 1.055, 2.4);
            const bsRGB = b <= 0.03928 ? b / 12.92 : Math.pow((b + 0.055) / 1.055, 2.4);

            return 0.2126 * rsRGB + 0.7152 * gsRGB + 0.0722 * bsRGB;
        }

        function getContrastRatio(color1, color2) {
            const lum1 = getLuminance(color1);
            const lum2 = getLuminance(color2);
            const brightest = Math.max(lum1, lum2);
            const darkest = Math.min(lum1, lum2);
            return (brightest + 0.05) / (darkest + 0.05);
        }

        function formatColor(hex) {
            const rgb = hexToRgb(hex);
            const hsl = hexToHsl(hex);
            
            switch (colorFormat) {
                case 'rgb':
                    return `rgb(${rgb.r}, ${rgb.g}, ${rgb.b})`;
                case 'hsl':
                    return `hsl(${hsl.h}, ${hsl.s}%, ${hsl.l}%)`;
                default:
                    return hex.toUpperCase();
            }
        }

        function generateRandomColor() {
            return '#' + Math.floor(Math.random()*16777215).toString(16).padStart(6, '0');
        }

        function generatePalette(type, base) {
            const hsl = hexToHsl(base);
            if (!hsl) return [base, base, base, base, base];
            
            const colors = [];
            
            switch (type) {
                case 'complementary':
                    colors.push(base);
                    colors.push(hslToHex((hsl.h + 180) % 360, hsl.s, hsl.l));
                    colors.push(hslToHex(hsl.h, Math.max(20, hsl.s - 30), Math.min(80, hsl.l + 20)));
                    colors.push(hslToHex((hsl.h + 180) % 360, Math.max(20, hsl.s - 30), Math.min(80, hsl.l + 20)));
                    colors.push(hslToHex(hsl.h, Math.max(10, hsl.s - 20), Math.max(20, hsl.l - 30)));
                    break;
                    
                case 'analogous':
                    colors.push(hslToHex((hsl.h - 30 + 360) % 360, hsl.s, hsl.l));
                    colors.push(hslToHex((hsl.h - 15 + 360) % 360, hsl.s, hsl.l));
                    colors.push(base);
                    colors.push(hslToHex((hsl.h + 15) % 360, hsl.s, hsl.l));
                    colors.push(hslToHex((hsl.h + 30) % 360, hsl.s, hsl.l));
                    break;
                    
                case 'triadic':
                    colors.push(base);
                    colors.push(hslToHex((hsl.h + 120) % 360, hsl.s, hsl.l));
                    colors.push(hslToHex((hsl.h + 240) % 360, hsl.s, hsl.l));
                    colors.push(hslToHex(hsl.h, Math.max(20, hsl.s - 30), Math.min(80, hsl.l + 20)));
                    colors.push(hslToHex(hsl.h, Math.max(10, hsl.s - 20), Math.max(20, hsl.l - 30)));
                    break;
                    
                case 'monochromatic':
                    colors.push(hslToHex(hsl.h, hsl.s, Math.min(90, hsl.l + 30)));
                    colors.push(hslToHex(hsl.h, hsl.s, Math.min(80, hsl.l + 15)));
                    colors.push(base);
                    colors.push(hslToHex(hsl.h, hsl.s, Math.max(20, hsl.l - 15)));
                    colors.push(hslToHex(hsl.h, hsl.s, Math.max(10, hsl.l - 30)));
                    break;
                    
                case 'tetradic':
                    colors.push(base);
                    colors.push(hslToHex((hsl.h + 90) % 360, hsl.s, hsl.l));
                    colors.push(hslToHex((hsl.h + 180) % 360, hsl.s, hsl.l));
                    colors.push(hslToHex((hsl.h + 270) % 360, hsl.s, hsl.l));
                    colors.push(hslToHex(hsl.h, Math.max(10, hsl.s - 20), Math.max(20, hsl.l - 30)));
                    break;
                    
                default:
                    colors.push(base);
                    colors.push(generateRandomColor());
                    colors.push(generateRandomColor());
                    colors.push(generateRandomColor());
                    colors.push(generateRandomColor());
            }
            
            return colors.map(color => color || base);
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            toastMessage.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        async function copyToClipboard(color) {
            try {
                await navigator.clipboard.writeText(formatColor(color));
                showToast(`Copied ${formatColor(color)}!`);
            } catch (err) {
                console.error('Failed to copy:', err);
                showToast('Failed to copy color');
            }
        }

        function toggleLock(index) {
            if (lockedColors.has(index)) {
                lockedColors.delete(index);
            } else {
                lockedColors.add(index);
            }
            renderPalette();
        }

        function renderPalette() {
            const container = document.getElementById('paletteContainer');
            container.innerHTML = '';

            currentPalette.forEach((color, index) => {
                const swatch = document.createElement('div');
                swatch.className = 'color-swatch rounded-xl h-32 relative';
                swatch.style.backgroundColor = color;
                
                const lockBtn = document.createElement('button');
                lockBtn.className = `lock-btn ${lockedColors.has(index) ? 'locked' : ''}`;
                lockBtn.innerHTML = lockedColors.has(index) ? 'üîí' : 'üîì';
                lockBtn.onclick = (e) => {
                    e.stopPropagation();
                    toggleLock(index);
                };
                
                const colorInfo = document.createElement('div');
                colorInfo.className = 'color-info';
                colorInfo.innerHTML = `
                    <div class="font-mono font-bold">${formatColor(color)}</div>
                    <div class="text-sm opacity-80">Click to copy</div>
                `;
                
                swatch.appendChild(lockBtn);
                swatch.appendChild(colorInfo);
                swatch.onclick = () => copyToClipboard(color);
                
                container.appendChild(swatch);
            });

            renderPreview();
            renderAnalysis();
        }

        function renderPreview() {
            const container = document.getElementById('previewContainer');
            container.innerHTML = `
                <div class="p-6 space-y-4">
                    <div class="h-12 rounded-lg flex items-center px-4 text-white font-bold" 
                         style="background-color: ${currentPalette[0]}">
                        Navigation Header
                    </div>
                    <div class="h-24 rounded-lg flex items-center justify-center text-white font-semibold text-lg" 
                         style="background-color: ${currentPalette[1]}">
                        Hero Section
                    </div>
                    <div class="grid grid-cols-3 gap-3">
                        ${currentPalette.slice(2).map((color, i) => `
                            <div class="h-16 rounded-lg flex items-center justify-center text-white font-medium" 
                                 style="background-color: ${color}">
                                Card ${i + 1}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function renderAnalysis() {
            const container = document.getElementById('analysisContainer');
            container.innerHTML = currentPalette.map((color, index) => {
                const hsl = hexToHsl(color);
                const contrastWhite = getContrastRatio(color, '#FFFFFF');
                const contrastBlack = getContrastRatio(color, '#000000');
                
                return `
                    <div class="flex items-center gap-3 p-3 rounded-lg bg-white/10">
                        <div class="w-12 h-12 rounded-lg border-2 border-white/30" 
                             style="background-color: ${color}"></div>
                        <div class="flex-1">
                            <div class="font-mono font-bold text-white">${formatColor(color)}</div>
                            <div class="text-sm text-white/70">
                                HSL: ${hsl.h}¬∞, ${hsl.s}%, ${hsl.l}%
                            </div>
                            <div class="text-xs text-white/60">
                                Contrast: ${contrastWhite.toFixed(1)}:1 (white) | ${contrastBlack.toFixed(1)}:1 (black)
                            </div>
                        </div>
                        ${lockedColors.has(index) ? '<span class="text-yellow-400">üîí</span>' : ''}
                    </div>
                `;
            }).join('');
        }

        function generateNewPalette() {
            // Don't regenerate locked colors
            const newPalette = generatePalette(paletteType, baseColor);
            
            currentPalette = currentPalette.map((color, index) => {
                return lockedColors.has(index) ? color : newPalette[index];
            });
            
            renderPalette();
        }

        function exportPalette(format) {
            let content, filename, mimeType;
            
            switch (format) {
                case 'css':
                    content = `:root {\n${currentPalette.map((color, i) => `  --color-${i + 1}: ${color};`).join('\n')}\n}`;
                    filename = `palette-${Date.now()}.css`;
                    mimeType = 'text/css';
                    break;
                    
                case 'json':
                default:
                    const paletteData = {
                        colors: currentPalette.map((color, i) => ({
                            name: `Color ${i + 1}`,
                            hex: color,
                            rgb: hexToRgb(color),
                            hsl: hexToHsl(color)
                        })),
                        type: paletteType,
                        baseColor: baseColor,
                        created: new Date().toISOString()
                    };
                    content = JSON.stringify(paletteData, null, 2);
                    filename = `palette-${Date.now()}.json`;
                    mimeType = 'application/json';
            }
            
            const blob = new Blob([content], { type: mimeType });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showToast(`Exported as ${format.toUpperCase()}!`);
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Initial render
            renderPalette();

            // Generate button
            document.getElementById('generateBtn').onclick = generateNewPalette;

            // Settings toggle
            document.getElementById('settingsBtn').onclick = function() {
                const panel = document.getElementById('settingsPanel');
                panel.classList.toggle('open');
            };

            // Base color inputs
            document.getElementById('baseColor').onchange = function(e) {
                baseColor = e.target.value;
                document.getElementById('baseColorText').value = baseColor;
                generateNewPalette();
            };

            document.getElementById('baseColorText').onchange = function(e) {
                if (/^#[0-9A-F]{6}$/i.test(e.target.value)) {
                    baseColor = e.target.value;
                    document.getElementById('baseColor').value = baseColor;
                    generateNewPalette();
                }
            };

            // Palette type selector
            document.getElementById('paletteType').onchange = function(e) {
                paletteType = e.target.value;
                generateNewPalette();
            };

            // Color format selector
            document.getElementById('colorFormat').onchange = function(e) {
                colorFormat = e.target.value;
                renderPalette();
            };

            // Save button
            document.getElementById('saveBtn').onclick = function() {
                const palette = {
                    id: Date.now(),
                    colors: [...currentPalette],
                    type: paletteType,
                    baseColor: baseColor,
                    created: new Date().toISOString()
                };
                savedPalettes.unshift(palette);
                savedPalettes = savedPalettes.slice(0, 10); // Keep only 10 recent
                showToast('Palette saved!');
            };
        });
    </script>
</body>
</html>
